jQuery(document).ready(function($){ // WP don't catch up jQuery dependency normally for some reason...

    /**
     * Iphone Style Checkboxes
     * @author Thomas Reynolds http://ios-checkboxes.awardwinningfjords.com/
     */
(function(){var h,k=Array.prototype.slice,a=function(b,d){var c,e,g;this.elem=$(b);e=$.extend({},a.defaults,d);for(c in e)g=e[c],this[c]=g;this.elem.data(this.dataName,this);this.wrapCheckboxWithDivs();this.attachEvents();this.disableTextSelection();this.resizeHandle&&this.optionallyResize("handle");this.resizeContainer&&this.optionallyResize("container");this.initialPosition()};a.prototype.isDisabled=function(){return this.elem.is(":disabled")};a.prototype.wrapCheckboxWithDivs=function(){this.elem.wrap("<div class='"+ this.containerClass+"' />");this.container=this.elem.parent();this.offLabel=$("<label class='"+this.labelOffClass+"'>\n <span>"+this.uncheckedLabel+"</span>\n</label>").appendTo(this.container);this.offSpan=this.offLabel.children("span");this.onLabel=$("<label class='"+this.labelOnClass+"'>\n <span>"+this.checkedLabel+"</span>\n</label>").appendTo(this.container);this.onSpan=this.onLabel.children("span");return this.handle=$("<div class='"+this.handleClass+"'>\n <div class='"+this.handleRightClass+ "'>\n <div class='"+this.handleCenterClass+"' />\n </div>\n</div>").appendTo(this.container)};a.prototype.disableTextSelection=function(){if($.browser.msie)return $([this.handle,this.offLabel,this.onLabel,this.container]).attr("unselectable","on")};a.prototype._getDimension=function(b,d){return null!=$.fn.actual?b.actual(d):b[d]()};a.prototype.optionallyResize=function(b){var d,a;a=this._getDimension(this.onLabel,"width");d=this._getDimension(this.offLabel,"width");return"container"===b?(b=(a> d?a:d)+(this._getDimension(this.handle,"width")+this.handleMargin),this.container.css({width:b})):this.handle.css({width:a>d?a:d})};a.prototype.onMouseDown=function(b){b.preventDefault();if(!this.isDisabled())return b=b.pageX||b.originalEvent.changedTouches[0].pageX,a.currentlyClicking=this.handle,a.dragStartPosition=b,a.handleLeftOffset=parseInt(this.handle.css("left"),10)||0};a.prototype.onDragMove=function(b,d){var c,e;if(a.currentlyClicking===this.handle)return e=(d+a.handleLeftOffset-a.dragStartPosition)/ this.rightSide,0>e&&(e=0),1<e&&(e=1),c=e*this.rightSide,this.handle.css({left:c}),this.onLabel.css({width:c+this.handleRadius}),this.offSpan.css({marginRight:-c}),this.onSpan.css({marginLeft:-(1-e)*this.rightSide})};a.prototype.onDragEnd=function(b,d){var c;if(a.currentlyClicking===this.handle&&!this.isDisabled())return a.dragging?(c=(d-a.dragStartPosition)/this.rightSide,this.elem.prop("checked",0.5<=c)):this.elem.prop("checked",!this.elem.prop("checked")),a.currentlyClicking=null,a.dragging=null, this.didChange()};a.prototype.refresh=function(){return this.didChange()};a.prototype.didChange=function(){var b;if("function"===typeof this.onChange)this.onChange(this.elem,this.elem.prop("checked"));if(this.isDisabled())return this.container.addClass(this.disabledClass),!1;this.container.removeClass(this.disabledClass);b=this.elem.prop("checked")?this.rightSide:0;this.handle.animate({left:b},this.duration);this.onLabel.animate({width:b+this.handleRadius},this.duration);this.offSpan.animate({marginRight:-b}, this.duration);return this.onSpan.animate({marginLeft:b-this.rightSide},this.duration)};a.prototype.attachEvents=function(){var b,a,c;c=this;b=function(b){return c.onGlobalMove.apply(c,arguments)};a=function(e){c.onGlobalUp.apply(c,arguments);$(document).unbind("mousemove touchmove",b);return $(document).unbind("mouseup touchend",a)};this.elem.change(function(){return c.refresh()});return this.container.bind("mousedown touchstart",function(e){c.onMouseDown.apply(c,arguments);$(document).bind("mousemove touchmove", b);return $(document).bind("mouseup touchend",a)})};a.prototype.initialPosition=function(){var b,a;b=this._getDimension(this.container,"width");this.offLabel.css({width:b-this.containerRadius});a=this.containerRadius+1;$.browser.msie&&7>$.browser.version&&(a-=3);this.rightSide=b-this._getDimension(this.handle,"width")-a;this.elem.is(":checked")?(this.handle.css({left:this.rightSide}),this.onLabel.css({width:this.rightSide+this.handleRadius}),this.offSpan.css({marginRight:-this.rightSide})):(this.onLabel.css({width:0}), this.onSpan.css({marginLeft:-this.rightSide}));if(this.isDisabled())return this.container.addClass(this.disabledClass)};a.prototype.onGlobalMove=function(b){var d;if(!this.isDisabled()&&a.currentlyClicking)return b.preventDefault(),d=b.pageX||b.originalEvent.changedTouches[0].pageX,!a.dragging&&Math.abs(a.dragStartPosition-d)>this.dragThreshold&&(a.dragging=!0),this.onDragMove(b,d)};a.prototype.onGlobalUp=function(b){var d;if(a.currentlyClicking)return b.preventDefault(),d=b.pageX||b.originalEvent.changedTouches[0].pageX, this.onDragEnd(b,d),!1};a.defaults={duration:200,checkedLabel:"ON",uncheckedLabel:"OFF",resizeHandle:!0,resizeContainer:!0,disabledClass:"iPhoneCheckDisabled",containerClass:"iPhoneCheckContainer",labelOnClass:"iPhoneCheckLabelOn",labelOffClass:"iPhoneCheckLabelOff",handleClass:"iPhoneCheckHandle",handleCenterClass:"iPhoneCheckHandleCenter",handleRightClass:"iPhoneCheckHandleRight",dragThreshold:5,handleMargin:15,handleRadius:4,containerRadius:5,dataName:"iphoneStyle",onChange:function(){}};h=a;$.iphoneStyle= this.iOSCheckbox=h;$.fn.iphoneStyle=function(){var b,a,c,e,g,f,l,j,m;b=1<=arguments.length?k.call(arguments,0):[];c=null!=(e=null!=(f=b[0])?f.dataName:void 0)?e:h.defaults.dataName;j=this.filter(":checkbox");f=0;for(l=j.length;f<l;f++)a=j[f],e=$(a).data(c),null!=e?(a=b[0],g=2<=b.length?k.call(b,1):[],null!=(m=e[a])&&m.apply(e,g)):new h(a,b[0]);return this};$.fn.iOSCheckbox=function(a){null==a&&(a={});a=$.extend({},a,{resizeHandle:!1,disabledClass:"iOSCheckDisabled",containerClass:"iOSCheckContainer", labelOnClass:"iOSCheckLabelOn",labelOffClass:"iOSCheckLabelOff",handleClass:"iOSCheckHandle",handleCenterClass:"iOSCheckHandleCenter",handleRightClass:"iOSCheckHandleRight",dataName:"iOSCheckbox"});return this.iphoneStyle(a)}}).call(this);
});